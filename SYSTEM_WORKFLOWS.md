# FIMS - Complete System Workflows & Process Diagrams

## ğŸ“Š Visual Business Flow Diagrams

---

## Workflow 1: COMPLETE LIFECYCLE (End-to-End)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PHASE 1: PROCUREMENT                         â”‚
â”‚                    (Admin - System Setup)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ   RAKE ARRIVES    â”ƒ
                    â”ƒ   at Rake Point   â”ƒ
                    â”—â”â”â”â”â”â”â”â”â”¬â”â”â”â”â”â”â”â”â”â”â”›
                             â”‚
                             â–¼
                    [Admin Creates Rake]
                    â€¢ Rake Code: RK-2023-001
                    â€¢ Company: ABC Fertilizers
                    â€¢ Product: Urea
                    â€¢ RR Quantity: 500 MT
                    â€¢ Rake Point: Station A
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â–¼                                                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PHASE 2A: DISTRIBUTION PATH A                   â”‚
â”‚              (RakePoint - Warehouse Storage Path)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                [RakePoint User Logs In]
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                       â”‚
                    â–¼                       â–¼
        [Create Loading Slips]   [Create Builties]
        â€¢ Slip #1: W1â†’Truck1      â€¢ BLT-001 (50 MT)
        â€¢ Slip #2: W2â†’Truck2      â€¢ BLT-002 (50 MT)
        â€¢ Slip #3: W3â†’Truck3      â€¢ BLT-003 (50 MT)
        ...                       ...
        (Track wagon unloading)   (Transportation docs)
                    â”‚                       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   TRUCKS DEPART   â•‘
                    â•‘   to Warehouses   â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WAREHOUSE 1 â”‚      â”‚ WAREHOUSE 2 â”‚      â”‚ WAREHOUSE 3 â”‚
â”‚  BLT-001    â”‚      â”‚  BLT-002    â”‚      â”‚  BLT-003    â”‚
â”‚  50 MT      â”‚      â”‚  50 MT      â”‚      â”‚  50 MT      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
                [Warehouse User Logs In]
                            â”‚
                            â–¼
                    [Record STOCK IN]
                    â€¢ Select Builty: BLT-001
                    â€¢ Unloaded Qty: 49.8 MT
                    â€¢ Unloader: John
                    â€¢ Warehouse: WH-1
                    â€¢ Date: 2023-10-08
                            â”‚
                            â–¼
                    [VALIDATION CHECK]
                    Total for BLT-001 < 50 MT? âœ“
                    Record in database
                            â”‚
                            â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  STOCK STORED   â”ƒ
                    â”ƒ  Balance: 49.8  â”ƒ
                    â”—â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”›
                            â”‚
                            â–¼
                    [Time Passes...]
                    [Customer Order Received]
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 3: DISPATCH                             â”‚
â”‚              (Warehouse - Customer Delivery)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [Warehouse - STOCK OUT]
                    â€¢ Select Warehouse: WH-1
                    â€¢ Check Balance: 49.8 MT âœ“
                    â€¢ Create NEW Builty (14 fields):
                      - Builty: BLTO-20231010-103045
                      - Truck: GJ-05-CD-5678
                      - Destination: Dealer A
                      - Quantity: 30 MT
                      - Freight: â‚¹15,000
                      - Auto-link: RK-2023-001
                            â”‚
                            â–¼
                    [VALIDATION CHECK]
                    30 MT < 49.8 MT Balance? âœ“
                    Create new builty
                    Record Stock OUT
                            â”‚
                            â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  TRUCK DEPARTS  â”ƒ
                    â”ƒ  to Dealer A    â”ƒ
                    â”—â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”›
                            â”‚
                    New Balance: 19.8 MT
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 4: BILLING                              â”‚
â”‚                (Accountant - Financial Docs)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                [Accountant User Logs In]
                                â”‚
                                â–¼
                    [Create E-Bill]
                    â€¢ Select Builty: BLTO-20231010-103045
                    â€¢ E-Bill #: EB-2023-001
                    â€¢ Amount: â‚¹1,50,000
                    â€¢ Date: 2023-10-10
                    â€¢ Upload Eway Bill PDF âœ“
                            â”‚
                            â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  BILL GENERATED â”ƒ
                    â”ƒ  Status: PAID   â”ƒ
                    â”—â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”›
                            â”‚
                            â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘  COMPLETE CYCLE   â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TRACEABILITY CHAIN:
E-Bill EB-2023-001
  â†’ Builty BLTO-20231010-103045 (Stock OUT)
    â†’ Warehouse Stock (49.8 MT â†’ 19.8 MT)
      â†’ Builty BLT-001 (Stock IN)
        â†’ Rake RK-2023-001 (500 MT)
          â†’ ABC Fertilizers, Urea
```

---

## Workflow 2: DIRECT MARKET DISPATCH (Bypass Warehouse)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SCENARIO: Government Emergency Order                â”‚
â”‚           (Goods go directly from Rake to Customer)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ   RAKE ARRIVES    â”ƒ
                    â”ƒ   RK-2023-002     â”ƒ
                    â”—â”â”â”â”â”â”â”â”â”¬â”â”â”â”â”â”â”â”â”â”â”›
                             â”‚
                             â–¼
                [Admin Creates Rake]
                â€¢ Rake Code: RK-2023-002
                â€¢ Company: XYZ Fertilizers
                â€¢ Product: DAP
                â€¢ RR Quantity: 300 MT
                â€¢ For: Government Order
                             â”‚
                             â–¼
                [RakePoint User Logs In]
                             â”‚
                             â–¼
            [Create Builties - Direct Dispatch]
            â€¢ BLT-101: 30 MT â†’ Govt WH-A
            â€¢ BLT-102: 30 MT â†’ Govt WH-B
            â€¢ BLT-103: 30 MT â†’ Govt WH-C
            ...
            (10 builties Ã— 30 MT = 300 MT)
                             â”‚
                             â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  TRUCKS DEPART  â”ƒ
                    â”ƒ  DIRECTLY TO    â”ƒ
                    â”ƒ  GOVERNMENT     â”ƒ
                    â”—â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”›
                            â”‚
                            â–¼
        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        â•‘   NO WAREHOUSE STOCK IN       â•‘
        â•‘   (Company warehouse bypassed)â•‘
        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     â”‚
                     â–¼
        [Accountant Creates E-Bills]
        â€¢ EB-2023-101 for BLT-101: â‚¹1,50,000
        â€¢ EB-2023-102 for BLT-102: â‚¹1,50,000
        ...
        Total: â‚¹15,00,000
                     â”‚
                     â–¼
            â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
            â”ƒ   ORDER COMPLETE â”ƒ
            â”ƒ   No Storage Costâ”ƒ
            â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

KEY DIFFERENCE:
â€¢ NO Stock IN to company warehouses
â€¢ Direct delivery = No rent charges
â€¢ Faster dispatch
â€¢ Government pays full freight
```

---

## Workflow 3: TWO BUILTY TYPES Explained

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         BUILTY TYPE A: RakePoint Builty (BLT-*)                  â”‚
â”‚              (Created during rake unloading)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [RakePoint User Action]
                    Click "Create Builty"
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        â”‚
        STEP 1: Select Rake Code    STEP 2: Fill 14 Fields
        â†“                                    â†“
        RK-2023-001 selected         â€¢ Date: 2023-10-08
        Auto-fills:                  â€¢ Account: Warehouse 1
        â€¢ Rake Point Name            â€¢ Truck: MH-12-AB-1234
        â€¢ Goods Name (Urea)          â€¢ Driver: John Doe
                    â”‚                â€¢ Quantity: 50 MT
                    â”‚                â€¢ LR Number: LR-12345
                    â”‚                ...
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [System Generates]
                    Builty Number: BLT-20231008-143022
                    Links to: RK-2023-001
                    Purpose: Transport from Rake â†’ Warehouse
                                â”‚
                                â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  BUILTY CREATED   â”ƒ
                    â”ƒ  Used for STOCK INâ”ƒ
                    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         BUILTY TYPE B: Warehouse Builty (BLTO-*)                 â”‚
â”‚              (Created during warehouse dispatch)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [Warehouse User Action]
                    Click "Stock OUT"
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        â”‚
        STEP 1: Select Warehouse     STEP 2: Create NEW Builty
        â†“                                    â†“
        Warehouse 1 selected         Fill complete 14 fields:
        Check Balance: 49.8 MT       â€¢ Date: 2023-10-10
                    â”‚                â€¢ Truck: GJ-05-CD-5678
                    â”‚                â€¢ Destination: Dealer A
                    â”‚                â€¢ Driver: Mike Smith
                    â”‚                â€¢ Quantity: 30 MT
                    â”‚                â€¢ LR Number: LR-67890
                    â”‚                ...
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [System Generates]
                    Builty Number: BLTO-20231010-103045
                    Auto-links to: RK-2023-001
                      (via warehouse stock history)
                    Purpose: Transport Warehouse â†’ Customer
                                â”‚
                                â–¼
                    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                    â”ƒ  NEW BUILTY CREATED â”ƒ
                    â”ƒ  Used for STOCK OUT â”ƒ
                    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

WHY TWO TYPES?
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BLT-* (RakePoint Builty)               â”‚
â”‚  â€¢ Describes Rake â†’ Warehouse transport â”‚
â”‚  â€¢ User SELECTS rake_code               â”‚
â”‚  â€¢ Used when RECEIVING goods            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BLTO-* (Warehouse Builty)              â”‚
â”‚  â€¢ Describes Warehouse â†’ Customer       â”‚
â”‚  â€¢ System AUTO-DETECTS rake_code        â”‚
â”‚  â€¢ Used when DISPATCHING goods          â”‚
â”‚  â€¢ NEW truck, driver, freight details   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BOTH link back to original Rake Code!
```

---

## Workflow 4: STOCK IN Validation (Critical Feature)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STOCK IN VALIDATION FLOWCHART                       â”‚
â”‚         (Prevents duplicate entries beyond capacity)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [Warehouse User Action]
                    Click "Stock IN"
                                â”‚
                                â–¼
                    [Select Builty: BLT-001]
                    Builty Details Loaded:
                    â€¢ Rake Code: RK-2023-001
                    â€¢ Original Quantity: 50 MT
                    â€¢ Account: Dealer A
                                â”‚
                                â–¼
                    [Enter Details]
                    â€¢ Unloaded Quantity: 12 MT
                    â€¢ Warehouse: WH-1
                    â€¢ Date: 2023-10-08
                                â”‚
                                â–¼
                    [Click "Record Stock IN"]
                                â”‚
                                â–¼
            â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
            â”ƒ  SYSTEM VALIDATION CHECK     â”ƒ
            â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                          â”‚
                          â–¼
        [Query Database]
        SELECT quantity_mt 
        FROM builty 
        WHERE builty_number = 'BLT-001'
        
        Result: builty_quantity = 50 MT
                          â”‚
                          â–¼
        [Query Existing Stock IN]
        SELECT SUM(quantity_mt) 
        FROM warehouse_stock
        WHERE builty_id = (BLT-001) 
          AND transaction_type = 'IN'
        
        Result: existing_stock_in = 36 MT
          (Previous entries: 10 + 12 + 12 + 12)
                          â”‚
                          â–¼
        [Calculate]
        total_already_in = 36 MT
        new_quantity = 12 MT
        builty_capacity = 50 MT
                          â”‚
                          â–¼
        [Check Capacity]
        IF (36 + 12) > 50:
            remaining = 50 - 36 = 14 MT
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                   â”‚
        â–¼                                   â–¼
    [12 â‰¤ 14?]                          [If 12 > 14]
    YES âœ“                               NO âœ—
        â”‚                                   â”‚
        â–¼                                   â–¼
    [ACCEPT]                            [REJECT]
    Record in database                  Show Error:
    New total: 48 MT                    "Builty BLT-001 has only
    Remaining: 2 MT                      14.00 MT remaining"
        â”‚                                   â”‚
        â–¼                                   â–¼
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
    â”ƒ  SUCCESS MESSAGE â”ƒ          â”ƒ  ERROR MESSAGE  â”ƒ
    â”ƒ  "Stock IN       â”ƒ          â”ƒ  "Cannot record â”ƒ
    â”ƒ   recorded!      â”ƒ          â”ƒ   stock IN"     â”ƒ
    â”ƒ   Remaining:     â”ƒ          â”ƒ                 â”ƒ
    â”ƒ   2.00 MT"       â”ƒ          â”ƒ  User must try  â”ƒ
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›          â”ƒ  with â‰¤14 MT    â”ƒ
                                  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

EXAMPLE SCENARIO:
Builty BLT-001: 50 MT capacity

Entry 1: 10 MT âœ“ (40 MT remaining)
Entry 2: 12 MT âœ“ (28 MT remaining)
Entry 3: 12 MT âœ“ (16 MT remaining)
Entry 4: 12 MT âœ“ (4 MT remaining)
Entry 5: 12 MT âœ— REJECTED! (only 4 MT left)
Entry 5: 4 MT  âœ“ (0 MT remaining)
Entry 6: 1 MT  âœ— REJECTED! (builty full)
```

---

## Workflow 5: STOCK OUT Validation & Balance Check

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STOCK OUT VALIDATION FLOWCHART                      â”‚
â”‚         (Prevents negative warehouse balance)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    [Warehouse User Action]
                    Click "Stock OUT"
                                â”‚
                                â–¼
                    [Select Warehouse: WH-1]
                                â”‚
                                â–¼
            [System Checks Current Balance]
            Query:
            SELECT 
              SUM(CASE WHEN type='IN' THEN qty END) as stock_in,
              SUM(CASE WHEN type='OUT' THEN qty END) as stock_out
            FROM warehouse_stock
            WHERE warehouse_id = WH-1
            
            Result:
            Stock IN: 99.8 MT
            Stock OUT: 50 MT
            Balance: 49.8 MT
                                â”‚
                                â–¼
                    [User Fills Form]
                    â€¢ Quantity: 30 MT
                    â€¢ Destination: Dealer A
                    â€¢ Truck: GJ-05-CD-5678
                    â€¢ ... (14 fields)
                                â”‚
                                â–¼
                    [Click "Record Stock OUT"]
                                â”‚
                                â–¼
            â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
            â”ƒ  VALIDATION CHECK            â”ƒ
            â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                          â”‚
                          â–¼
        [Compare]
        Requested: 30 MT
        Available: 49.8 MT
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                   â”‚
        â–¼                                   â–¼
    [30 â‰¤ 49.8?]                        [If 30 > 49.8]
    YES âœ“                               NO âœ—
        â”‚                                   â”‚
        â–¼                                   â–¼
    [ACCEPT]                            [REJECT]
    â€¢ Generate Builty:                  Show Error:
      BLTO-20231010-103045              "Warehouse has only
    â€¢ Auto-link: RK-2023-001             49.8 MT available.
    â€¢ Record Stock OUT                   Cannot dispatch 30 MT"
    â€¢ New Balance: 19.8 MT                  â”‚
        â”‚                                   â”‚
        â–¼                                   â–¼
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“          â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
    â”ƒ  SUCCESS         â”ƒ          â”ƒ  ERROR MESSAGE  â”ƒ
    â”ƒ  Truck can leave â”ƒ          â”ƒ  Adjust quantityâ”ƒ
    â”ƒ  New balance:    â”ƒ          â”ƒ  or select      â”ƒ
    â”ƒ  19.8 MT         â”ƒ          â”ƒ  different WH   â”ƒ
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›          â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

EXAMPLE SCENARIO:
Warehouse 1 Balance: 49.8 MT

Request 1: 30 MT  âœ“ (New balance: 19.8 MT)
Request 2: 15 MT  âœ“ (New balance: 4.8 MT)
Request 3: 10 MT  âœ— REJECTED! (only 4.8 MT left)
Request 3: 4.8 MT âœ“ (New balance: 0 MT)
Request 4: 1 MT   âœ— REJECTED! (warehouse empty)
```

---

## Workflow 6: COMPLETE DATA FLOW (All Tables)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DATABASE RELATIONSHIPS                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                        â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
                        â”ƒ   RAKES    â”ƒ â† Admin creates
                        â”ƒ (rake_code)â”ƒ
                        â”—â”â”â”â”â”¯â”â”â”â”â”â”â”â”›
                             â”‚ 1
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        â”‚        â”‚
                    â–¼ *      â–¼ *      â–¼ *
            â”â”â”â”â”â”â”â”â”â”â”â”“ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
            â”ƒ  BUILTY  â”ƒ â”ƒ LOADING_SLIPâ”ƒ â”ƒ  (Summary)  â”ƒ
            â”ƒ(builty_id)â”ƒâ†â”ƒ (slip_id)   â”ƒ â”ƒ             â”ƒ
            â”—â”â”â”â”â”¯â”â”â”â”â”â”â”› â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”› â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                 â”‚ 1           â”‚ *
                 â”‚             â”‚
                 â”‚        â”Œâ”€â”€â”€â”€â”˜
                 â”‚        â”‚
                 â–¼ *      â–¼ (optional link)
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
        â”ƒ WAREHOUSE_STOCK  â”ƒ â† Warehouse records
        â”ƒ   (stock_id)     â”ƒ
        â”ƒ â€¢ transaction:   â”ƒ
        â”ƒ   'IN' or 'OUT'  â”ƒ
        â”—â”â”â”â”â”â”â”â”â”¯â”â”â”â”â”â”â”â”â”â”›
                 â”‚
                 â”‚ (builty_id links back)
                 â”‚
                 â–¼
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
        â”ƒ     EBILLS       â”ƒ â† Accountant creates
        â”ƒ   (ebill_id)     â”ƒ
        â”ƒ â€¢ builty_id (FK) â”ƒ
        â”ƒ â€¢ eway_bill_pdf  â”ƒ
        â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

DATA INSERTION SEQUENCE:
1. Admin â†’ INSERT INTO rakes (rake_code, ...)
2. RakePoint â†’ INSERT INTO loading_slips (rake_code FK)
3. RakePoint â†’ INSERT INTO builty (rake_code FK)
4. Warehouse â†’ INSERT INTO warehouse_stock (builty_id FK, type='IN')
5. Warehouse â†’ INSERT INTO builty (rake_code from history)
6. Warehouse â†’ INSERT INTO warehouse_stock (builty_id FK, type='OUT')
7. Accountant â†’ INSERT INTO ebills (builty_id FK)

TRACEABILITY QUERY:
SELECT 
    r.rake_code,
    r.company_name,
    r.product_name,
    b1.builty_number as rake_builty,
    ws.transaction_type,
    ws.quantity_mt,
    b2.builty_number as dispatch_builty,
    e.ebill_number,
    e.amount
FROM rakes r
LEFT JOIN builty b1 ON r.rake_code = b1.rake_code
LEFT JOIN warehouse_stock ws ON b1.builty_id = ws.builty_id
LEFT JOIN builty b2 ON ws.builty_id = b2.builty_id (for OUT)
LEFT JOIN ebills e ON b2.builty_id = e.builty_id
WHERE r.rake_code = 'RK-2023-001'
ORDER BY ws.date;
```

---

## Workflow 7: USER ROLE PERMISSIONS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROLE-BASED ACCESS CONTROL                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”“        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ   ADMIN    â”ƒ        â”ƒ  RAKE POINT  â”ƒ        â”ƒ  WAREHOUSE  â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”›        â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”›        â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
      â”‚                      â”‚                      â”‚
      â”‚ CAN:                 â”‚ CAN:                 â”‚ CAN:
      â”œâ”€ Create Rakes        â”œâ”€ Create Builties    â”œâ”€ Stock IN
      â”œâ”€ Manage Accounts     â”œâ”€ Create Load Slips  â”œâ”€ Stock OUT
      â”œâ”€ Manage Warehouses   â”œâ”€ View Builties      â”œâ”€ View Balance
      â”œâ”€ View Summary        â”œâ”€ View Load Slips    â”œâ”€ View Dashboard
      â”œâ”€ View All Reports    â”‚                     â”‚
      â”‚                      â”‚ CANNOT:              â”‚ CANNOT:
      â”‚ CANNOT:              â”œâ”€ See Warehouse      â”œâ”€ See Rake Point
      â”œâ”€ Create Builties     â”‚   Operations        â”‚   Operations
      â”œâ”€ Record Stock        â”œâ”€ Record Stock       â”œâ”€ Create Rakes
      â”œâ”€ Create E-Bills      â”œâ”€ Create E-Bills     â”œâ”€ Create E-Bills
      â”‚                      â”‚                     â”‚
      â–¼                      â–¼                     â–¼
        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
        â”ƒ           ACCOUNTANT                    â”ƒ
        â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                      â”‚
                      â”‚ CAN:
                      â”œâ”€ Create E-Bills
                      â”œâ”€ Upload Eway Bills
                      â”œâ”€ View All E-Bills
                      â”œâ”€ View Builties (read-only)
                      â”‚
                      â”‚ CANNOT:
                      â”œâ”€ Create Rakes
                      â”œâ”€ Create Builties
                      â”œâ”€ Record Stock
                      â”‚
                      â–¼

LOGIN FLOW:
User â†’ /login â†’ Check credentials â†’ Load role
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                          â–¼                          â–¼
    role=Admin             role=RakePoint           role=Warehouse
        â”‚                          â”‚                          â”‚
        â””â”€â†’ /admin/dashboard  /rakepoint/dashboard  /warehouse/dashboard
                                   â”‚                          â”‚
                              role=Accountant                 â”‚
                                   â”‚                          â”‚
                              /accountant/dashboard â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SECURITY CHECK (on every route):
@app.route('/warehouse/stock-in')
@login_required  â† Must be logged in
def warehouse_stock_in():
    if current_user.role != 'Warehouse':  â† Role check
        flash('Unauthorized')
        return redirect(url_for('index'))
    # ... route logic
```

---

## Workflow 8: REPORT GENERATION

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ADMIN SUMMARY REPORT                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                [Admin Clicks "Summary"]
                                â”‚
                                â–¼
            [Query: Rake-wise Aggregation]
            
            SELECT 
                r.rake_code,
                r.company_name,
                r.date,
                r.rr_quantity,
                COALESCE(SUM(CASE 
                    WHEN ws.transaction_type = 'IN' 
                    THEN ws.quantity_mt 
                    ELSE 0 END), 0) as stock_in,
                COALESCE(SUM(CASE 
                    WHEN ws.transaction_type = 'OUT' 
                    THEN ws.quantity_mt 
                    ELSE 0 END), 0) as stock_out
            FROM rakes r
            LEFT JOIN builty b ON r.rake_code = b.rake_code
            LEFT JOIN warehouse_stock ws ON b.builty_id = ws.builty_id
            GROUP BY r.rake_code
            ORDER BY r.date DESC;
                                â”‚
                                â–¼
                    [Display Table]
                    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
    â”ƒ  Rake    â”‚ Company â”‚ Date  â”‚ RR   â”‚ IN  â”‚ OUT â”‚Balanceâ”ƒ
    â”ƒ  Code    â”‚         â”‚       â”‚ Qty  â”‚     â”‚     â”‚       â”ƒ
    â”£â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”«
    â”ƒ RK-001   â”‚ ABC Ltd â”‚ 01-10 â”‚ 500  â”‚ 480 â”‚ 200 â”‚ 280   â”ƒ
    â”ƒ RK-002   â”‚ XYZ Ltd â”‚ 05-10 â”‚ 300  â”‚ 300 â”‚ 300 â”‚ 0     â”ƒ
    â”ƒ RK-003   â”‚ PQR Ltd â”‚ 10-10 â”‚ 400  â”‚ 200 â”‚ 0   â”‚ 200   â”ƒ
    â”—â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”»â”â”â”â”â”â”â”â”›
    
    TOTALS: RR: 1200 MT â”‚ IN: 980 MT â”‚ OUT: 500 MT â”‚ Balance: 480 MT

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WAREHOUSE BALANCE REPORT                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
            [Warehouse Clicks "View Balance"]
                                â”‚
                                â–¼
            [Query: Warehouse-wise Stock]
            
            SELECT 
                w.warehouse_name,
                w.location,
                COALESCE(SUM(CASE 
                    WHEN ws.transaction_type = 'IN' 
                    THEN ws.quantity_mt 
                    ELSE 0 END), 0) as stock_in,
                COALESCE(SUM(CASE 
                    WHEN ws.transaction_type = 'OUT' 
                    THEN ws.quantity_mt 
                    ELSE 0 END), 0) as stock_out
            FROM warehouses w
            LEFT JOIN warehouse_stock ws ON w.warehouse_id = ws.warehouse_id
            GROUP BY w.warehouse_id
            ORDER BY w.warehouse_name;
                                â”‚
                                â–¼
                    [Display Report]
                    
    â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
    â”ƒ  Warehouse  â”‚ Location â”‚ IN    â”‚ OUT  â”‚ Balance â”ƒ
    â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â•‹â”â”â”â”â”â”â•‹â”â”â”â”â”â”â”â”â”â”«
    â”ƒ Warehouse 1 â”‚ Loc-A    â”‚ 250   â”‚ 100  â”‚ 150     â”ƒ
    â”ƒ Warehouse 2 â”‚ Loc-B    â”‚ 230   â”‚ 50   â”‚ 180     â”ƒ
    â”ƒ Warehouse 3 â”‚ Loc-C    â”‚ 0     â”‚ 0    â”‚ 0       â”ƒ
    â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”»â”â”â”â”â”â”â”»â”â”â”â”â”â”â”â”â”â”›
    
    TOTAL:                  480 MT   150 MT   330 MT
```

---

## KEY TAKEAWAYS

### 1. **Code-Based Linking**
Every transaction traces back to rake_code:
```
E-Bill â†’ Builty â†’ Warehouse Stock â†’ Original Builty â†’ Rake
```

### 2. **Two Builty Types**
- **BLT-*** (RakePoint): Rake â†’ Warehouse transport
- **BLTO-*** (Warehouse): Warehouse â†’ Customer dispatch

### 3. **Critical Validations**
- Stock IN: Cannot exceed builty capacity
- Stock OUT: Cannot exceed warehouse balance

### 4. **Role Separation**
Each user role has specific functions - no overlap

### 5. **Complete Traceability**
From railway rake to customer delivery - full audit trail

---

**Document Version:** 1.0  
**Date:** October 9, 2025  
**Purpose:** Visual workflow reference for FIMS system
